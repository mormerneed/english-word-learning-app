{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file://G%3A/english-word-learning-app/src/components/ChatBox.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport vocabularyData from \"./../../vocabulary.json\"; // 导入JSON文件\r\n\r\nexport default function ChatBox() {\r\n  const [messages, setMessages] = useState<{ role: string; content: string }[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [topic, setTopic] = useState(\"Travel\");\r\n  const [vocabulary, setVocabulary] = useState<{ [key: string]: string[] }>({});\r\n  const [topics, setTopics] = useState<string[]>([]); // 用来存储主题列表\r\n\r\n  useEffect(() => {\r\n    // 从文件中加载词汇表，并提取主题\r\n    setVocabulary(vocabularyData);\r\n    setTopics(Object.keys(vocabularyData)); // 获取主题\r\n  }, []);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    setMessages([...messages, { role: \"user\", content: input }]);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          message: input,\r\n          topic,\r\n          words: vocabulary[topic],\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      setMessages((prev) => [...prev, { role: \"ai\", content: data.reply.content }]);\r\n    } catch (err) {\r\n      setMessages((prev) => [...prev, { role: \"ai\", content: \"发生了错误。\" }]);\r\n    }\r\n\r\n    setInput(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6 bg-white shadow-md rounded-lg flex flex-col space-y-4\">\r\n      {/* 主题选择 */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <label className=\"text-gray-700 font-semibold\">选择主题：</label>\r\n        <select\r\n          value={topic}\r\n          onChange={(e) => setTopic(e.target.value)}\r\n          className=\"p-2 border rounded-md focus:ring focus:ring-indigo-300\"\r\n        >\r\n          {topics.map((t) => (\r\n            <option key={t} value={t}>\r\n              {t}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* 消息列表 */}\r\n      <div className=\"h-64 overflow-y-auto p-3 bg-gray-50 rounded-md space-y-3\">\r\n        {messages.map((msg, index) => (\r\n          <div\r\n            key={index}\r\n            className={`p-3 rounded-lg ${\r\n              msg.role === \"user\"\r\n                ? \"bg-blue-500 text-white self-end text-right\"\r\n                : \"bg-gray-200 text-gray-900 self-start text-left\"\r\n            }`}\r\n          >\r\n            {msg.content}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* 输入框 & 按钮 */}\r\n      <div className=\"flex space-x-2\">\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          className=\"flex-1 p-2 border rounded-md focus:ring focus:ring-indigo-300\"\r\n          placeholder=\"输入你的消息...\"\r\n        />\r\n        <button\r\n          onClick={handleSend}\r\n          className=\"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition\"\r\n        >\r\n          发送\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA,sJAAsD,WAAW;AAFjE;;;;AAIe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuC,EAAE;IAChF,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA+B,CAAC;IAC3E,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE,GAAG,WAAW;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,kBAAkB;QAClB,cAAc,kFAAA,CAAA,UAAc;QAC5B,UAAU,OAAO,IAAI,CAAC,kFAAA,CAAA,UAAc,IAAI,OAAO;IACjD,GAAG,EAAE;IAEL,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,YAAY;eAAI;YAAU;gBAAE,MAAM;gBAAQ,SAAS;YAAM;SAAE;QAE3D,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,aAAa;gBACxC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,SAAS;oBACT;oBACA,OAAO,UAAU,CAAC,MAAM;gBAC1B;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,YAAY,CAAC,OAAS;uBAAI;oBAAM;wBAAE,MAAM;wBAAM,SAAS,KAAK,KAAK,CAAC,OAAO;oBAAC;iBAAE;QAC9E,EAAE,OAAO,KAAK;YACZ,YAAY,CAAC,OAAS;uBAAI;oBAAM;wBAAE,MAAM;wBAAM,SAAS;oBAAS;iBAAE;QACpE;QAEA,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAA8B;;;;;;kCAC/C,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAU;kCAET,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC;gCAAe,OAAO;0CACpB;+BADU;;;;;;;;;;;;;;;;0BAQnB,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,KAAK,sBAClB,8OAAC;wBAEC,WAAW,CAAC,eAAe,EACzB,IAAI,IAAI,KAAK,SACT,+CACA,kDACJ;kCAED,IAAI,OAAO;uBAPP;;;;;;;;;;0BAaX,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAU;wBACV,aAAY;;;;;;kCAEd,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file://G%3A/english-word-learning-app/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAQzC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1CJ,OAAOC,OAAO,GAAGC,QAAQ;QAC3B,OAAO,IAAIL,QAAQC,GAAG,CAACO,SAAS,EAAE;;QAIlC;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file://G%3A/english-word-learning-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file://G%3A/english-word-learning-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}